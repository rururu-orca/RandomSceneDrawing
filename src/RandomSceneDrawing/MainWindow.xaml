<Window
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
     xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
     xmlns:vm="clr-namespace:RandomSceneDrawing;assembly=RandomSceneDrawing.Core"
     xmlns:uc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
     x:Name="window"
     mc:Ignorable="d"
     d:DataContext="{x:Static vm:Program.designVm}"
     xmlns:ui="http://schemas.modernwpf.com/2019"
     Title="Random Pause  動画のシーンがランダムで表示されます"
     Background="#FF181818"
     Foreground="#FFD1D1D1">
    <i:Interaction.Triggers>
        <i:EventTrigger
             EventName="LocationChanged">
            <i:InvokeCommandAction
                 Command="{Binding WindowTopUpdated}"
                 CommandParameter="{Binding Top, ElementName=window, ValidatesOnNotifyDataErrors=True}"/>
            <i:InvokeCommandAction
                 Command="{Binding WindowLeftUpdated}"
                 CommandParameter="{Binding Left, ElementName=window, ValidatesOnNotifyDataErrors=True}"/>
        </i:EventTrigger>
        <i:EventTrigger
             EventName="Closed">
            <i:InvokeCommandAction
                 Command="{Binding WindowClosed}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <DockPanel
         x:Name="dockPanel"
         Margin="4">
        <StackPanel
             DockPanel.Dock="Top"
             Orientation="Horizontal">
            <Button
                 Width="128"
                 Content="{Binding DrawingCommandText}"
                 Command="{Binding DrawingCommand}"/>
            <StackPanel
                 HorizontalAlignment="Stretch">
                <StackPanel
                     Orientation="Horizontal"
                     HorizontalAlignment="Stretch">
                    <Label
                         Content="Frames"/>
                    <Label
                         FontSize="24"
                         Width="100"
                         Visibility="{Binding DrawingServiceVisibility}"
                         Content="{Binding CurrentFrames}"/>
                    <TextBox
                         Width="50"
                         Text="{Binding FramesText}"
                         Visibility="{Binding DrawingSettingVisibility}"/>
                    <Button
                         Content="+"
                         Style="{StaticResource IconButton}"
                         Visibility="{Binding DrawingSettingVisibility}"
                         Command="{Binding IncrementFrames}" />
                    <Button
                         Content="-"
                         Style="{StaticResource IconButton}"
                         Visibility="{Binding DrawingSettingVisibility}"
                         Command="{Binding DecrementFrames}"/>
                </StackPanel>
            </StackPanel>
            <StackPanel
                 Orientation="Horizontal"
                 HorizontalAlignment="Stretch">
                <Label
                     Content="Duration per frame:"/>
                <Label
                     FontSize="24"
                     Content="{Binding CurrentDuration}"
                     Visibility="{Binding DrawingServiceVisibility}"/>
                <TextBox
                     Width="50"
                     Text="{Binding DurationText}"
                     Visibility="{Binding DrawingSettingVisibility}"/>
                <Button
                     Content="+"
                     Style="{StaticResource IconButton}"
                     Visibility="{Binding DrawingSettingVisibility}"
                     Command="{Binding IncrementDuration}"/>
                <Button
                     Content="-"
                     Style="{StaticResource IconButton}"
                     Visibility="{Binding DrawingSettingVisibility}"
                     Command="{Binding DecrementDuration}"/>
            </StackPanel>
            <Label
                 Content="{Binding SourceName}"
                 Visibility="{Binding MediaPlayerVisibility}"/>
            <Label
                 Content="{Binding ScenePosition}"
                 Visibility="{Binding MediaPlayerVisibility}"/>
            <Label
                 Content=" / "
                 Visibility="{Binding MediaPlayerVisibility}"/>
            <Label
                 Content="{Binding SourceDuration}"
                 Visibility="{Binding MediaPlayerVisibility}"/>
        </StackPanel>
        <uc:VideoView
             HorizontalContentAlignment="Stretch"
             VerticalContentAlignment="Stretch"
             Background="#FF181818"
             Visibility="{Binding MediaPlayerVisibility}">
            <i:Interaction.Triggers>
                <i:EventTrigger
                     EventName="Loaded">
                    <i:ChangePropertyAction
                         PropertyName="MediaPlayer"
                         Value="{Binding MediaPlayer}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <DockPanel
                 x:Name="InnerDockPanel"
                 LastChildFill="False"
                 HorizontalAlignment="Stretch"
                 VerticalAlignment="Stretch">
                <StackPanel
                     DockPanel.Dock="Top"
                     HorizontalAlignment="Left"
                     Orientation="Vertical">
                    <StackPanel
                         Orientation="Horizontal"
                         Visibility="{Binding DrawingSettingVisibility}">
                        <Button
                             Width="128"
                             Content="🔀 Show Random 🔀"
                             Command="{Binding Randomize}"/>
                        <Button
                             Command="{Binding Play}"
                             Style="{StaticResource IconButton}"
                             Content="▶"/>
                        <Button
                             Command="{Binding Pause}"
                             Style="{StaticResource IconButton}"
                             Content="⏸"/>
                        <Button
                             Command="{Binding Stop}"
                             Style="{StaticResource IconButton}"
                             Content="⏹"/>
                    </StackPanel>
                    <DockPanel
                         Visibility="{Binding DrawingSettingVisibility}">
                        <Button
                             DockPanel.Dock="Left"
                             Width="128"
                             Content="PlayList"
                             Command="{Binding SetPlayListFilePath}"
                             Visibility="{Binding DrawingSettingVisibility}"/>
                        <TextBox
                             Text="{Binding PlayListFilePathText}"
                             Visibility="{Binding DrawingSettingVisibility}"
                             HorizontalAlignment="Stretch"/>
                    </DockPanel>
                    <DockPanel
                         Visibility="{Binding DrawingSettingVisibility}">
                        <Button
                             DockPanel.Dock="Left"
                             Width="128"
                             Content="SnapShotFolder"
                             Command="{Binding SetSnapShotFolderPath}"
                             Visibility="{Binding DrawingSettingVisibility}"/>
                        <TextBox
                             Text="{Binding SnapShotFolderPathText}"
                             Visibility="{Binding DrawingSettingVisibility}"
                             HorizontalAlignment="Stretch"/>
                    </DockPanel>
                </StackPanel>
                <StackPanel
                     DockPanel.Dock="Bottom"
                     Height="28">
                    <Label
                         Opacity="0"
                         HorizontalAlignment="Left"
                         Content="{Binding StatusMessage}"
                         Foreground="#FF0C0C0C"/>
                </StackPanel>
            </DockPanel>
        </uc:VideoView>
    </DockPanel>
</Window>